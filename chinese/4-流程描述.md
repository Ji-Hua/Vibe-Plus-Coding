© 2026 Ji Hua.
This repository documents the Vibe + Coding methodology.
Licensed under CC BY-NC-ND 4.0.

Vibe + Coding — Version 0.2

# 第四章｜Vibe + Coding 的最佳工程流程

本章给出 Vibe + Coding 的最佳**工程流程定义**。

这一流程并不是一个“如何使用 AI 的技巧集合”，
而是一套**以责任为核心、以文档为接口、以审计为约束的工程流程模型**。

它回答的不是“AI 能做什么”，
而是：

> **在一个需要长期维护的工程中，
> 不同智能体应当如何在被严格约束的前提下协作，
> 并且如何确保决策权、执行权与责任始终不发生错位。**

在前一章中，我们已经通过军事指挥系统建立了统一的心智模型。
本章将严格以**工程语言**描述流程本体，并在关键结构节点处，通过明确标识的
**「心智模型比喻」**，使用军事指挥系统对同一结构进行对照性重描写，
以解释这些工程约束为何不可被削弱或绕过。

---

## 一、流程的基本单元：一次责任闭环

在 Vibe + Coding 中，流程的基本单元**不是整个项目**，
而是一次**在明确责任边界内完成的工程闭环**。

一次工程闭环可以对应：

- 一个功能模块
- 一个子系统
- 一个阶段性目标
- 或一个可独立交付的责任单元

因此，本章描述的流程并不意味着“项目完成”，
而是意味着：

> **在当前责任范围内，
> 完成了一次合法的决策、分解、执行与审计，并由责任人回收结果。**

工程规模正是通过**多次责任闭环的递归组合**逐步扩展的。

---

### 心智模型比喻｜责任闭环

在军事指挥系统中，可被严格控制的最小单位不是“整场战争”，
而是一次被明确授权、目标清晰、可以被复盘的作战行动。
每一次行动都有明确的指挥官、参谋支持、执行单位与军纪约束，
并且在行动结束后，必须由指挥层确认结果并承担后果。
如果没有这样的行动闭环，任何指挥系统都会迅速失控。

---

## 二、流程总览：四个不可混淆的阶段

Vibe + Coding 的工程流程被明确划分为四个阶段：

1. **决策阶段**
2. **分解阶段**
3. **执行阶段**
4. **审计阶段**

这四个阶段不是简单的顺序步骤，
而是**责任密度逐级递减、但约束强度逐级增强的工程分区**。

每一个阶段都严格限定了：

- 参与角色
- 合法输入与输出
- 允许发生的行为
- 明确禁止的越权行为

---

## 三、决策阶段：高责任决策的唯一合法发生地

### 阶段目标

将模糊、不完整的需求与目标，
转化为**明确、可冻结、可被后续阶段执行与审计的设计决策**。

### 参与角色

- **Actor（人类工程师）**：唯一的责任承担者与决策确认者
- **Vibe Agent**：参与分析、推演与表达的协作者，不拥有决策权

### 输入

- 模糊需求描述
- 问题背景与约束
- 业务或技术目标

### 核心活动

在这一阶段，Actor 在 Vibe Agent 的辅助下完成：

- 明确要解决的问题与明确不解决的问题
- 界定系统或模块的责任边界
- 比较候选方案并完成取舍
- 明确必须长期成立的不变量
- 判断哪些风险可以接受，哪些必须避免

需要强调的是：

> **任何会对系统长期形态、语义边界或维护成本产生影响的判断，
> 都必须在此阶段完成并被显式确认。**

### 输出

- 一份完整、明确并被冻结的设计文档

从这一刻开始，设计文档进入只读状态，
后续阶段不再允许引入新的高责任判断。

---

### 心智模型比喻｜设计决策与指挥意图

在军事系统中，最高指挥官必须在行动开始前明确作战决心，
包括行动目标、允许付出的代价以及绝不可触碰的边界。
参谋部可以提出多种方案、分析风险、暴露假设，
但是否采纳、采纳到什么程度，只能由指挥官决定。
一旦作战决心形成，任何前线单位都无权重新讨论“要不要打”或“打到哪里”。

---

## 四、分解阶段：从决策到可执行任务

### 阶段目标

将已冻结的设计决策，
转化为**可以被执行体直接理解和执行的具体任务描述**。

### 参与角色

- **Vibe Agent**：主要负责分解与结构化表达
- **Actor（人类工程师）**：负责确认分解结果是否忠实反映原始决策

### 输入

- 已冻结的设计文档

### 核心活动

在这一阶段，Vibe Agent 将设计文档拆解为
**一份或多份任务说明书**。

每一份任务说明书都必须明确回答：

- 本次任务具体要完成什么
- 哪些设计结论已经冻结，不得触碰
- 哪些判断被明确下放给执行阶段
- 如何客观判断任务是否完成

---

### 心智模型比喻｜参谋部与作战命令

在军事系统中，指挥官并不会直接向前线下达模糊意图，
而是通过参谋部将作战决心转化为结构化的作战命令。
这些命令明确规定了任务目标、行动范围、禁止事项，
并且清楚写明“在什么状态下任务被视为完成”。
没有被清晰转译为命令的决心，在前线等同于不存在。

---

### 任务说明书的工程地位

任务说明书是一个**正式工程工件**，而不是临时提示或随意指令。

每一份任务说明书必须包含：

- 明确的任务目标
- 清晰的授权边界与禁止事项
- 可自由选择的技术空间
- **任务完成的判定条件（测试）**

---

### 心智模型比喻｜任务命令与完成条件

在作战命令中，胜负判据不是事后讨论的问题，
而是命令本身的一部分。
如果命令没有明确写明“达到什么状态即可结束行动”，
那么行动既无法执行，也无法评估，更无法追责。
测试在工程中的地位，正等同于作战命令中的完成条件。

---

## 五、执行阶段：在授权范围内完成实现

### 阶段目标

在不引入任何新决策的前提下，
完成任务说明书所描述的实现目标。

### 参与角色

- **Code Agent**：唯一执行主体
- 人类工程师：不参与

### 输入

- 单一任务说明书

### 核心活动

Code Agent 根据任务说明书：

- 选择具体实现路径
- 填补实现细节
- 调整实现以满足任务完成判定条件

执行阶段允许技术层面的自由选择，
但严格禁止任何形式的重新决策。

---

### 心智模型比喻｜前线执行与越权

在军事系统中，前线指挥官可以根据地形与态势选择进攻路线，
但无权改变作战目标或自行扩大行动规模。
任何“看起来更合理”的临时决策，
如果超出了命令授权，都会被视为越权行为。
执行阶段的一根筋，并非能力不足，而是体系稳定的前提。

---

## 六、审计阶段：一致性检查与责任回溯

### 阶段目标

判断执行结果是否**在合法授权范围内完成**，
并明确问题（若存在）的责任归属。

### 参与角色

- **Verification Agent**：执行审计
- **Actor（人类工程师）**：最终裁决

### 输入

- 执行结果
- 任务说明书
- 原始设计文档

### 核心活动

审计阶段不评判实现是否优雅，
只回答以下问题：

- 是否满足任务完成判定条件
- 是否违反任务说明书的授权边界
- 是否隐式改变了原始设计决策

需要明确指出的是：测试负责正确性，而审计负责合规性。

---

### 心智模型比喻｜军纪系统与责任回溯

在军事体系中，军纪系统不负责指挥作战，
也不负责优化战术，
它只做一件事：判断是否违令。
一旦发现越权行为，问题必须被上推至指挥层，
由作出决策的人承担修正或接受后果的责任。

---

## 七、责任回收与发布

审计完成后，流程进入责任回收点。

只有 Actor，作为责任承担者，
才拥有最终确认与发布权。

发布表示：

> **在当前责任边界内，一次工程闭环已经完成。**

发布结果可以作为后续流程的稳定前提。

---

## 八、递归结构：流程如何扩展为工程规模

Vibe + Coding 的工程流程是**天然递归的**：

- 上一轮流程冻结的决策
  → 成为下一轮流程的输入约束
- 下一轮流程的发布结果
  → 成为更高层系统中的既定事实

---

## 本章小结

Vibe + Coding 的工程流程是一套**以四阶段为核心的责任闭环模型**：

- 决策集中发生
- 分解负责去歧义
- 执行严格受限
- 审计明确归责

通过在关键结构节点引入清晰的**心智模型比喻**，
我们并非在“美化”流程，
而是在说明：
**这些工程约束并非人为选择，而是所有高可靠系统长期演化后的必然结果。**
