© 2026 Ji Hua.
This repository documents the Vibe + Coding methodology.
Licensed under CC BY-NC-ND 4.0.

Vibe + Coding — Version 0.2

---

# 第六章 | 分解阶段（Decomposition Phase）

## 从已冻结决策到可执行任务的唯一合法路径

在 Vibe + Coding 的工程流程中，**分解阶段是决策与执行之间唯一允许存在的过渡区**。

如果说决策阶段解决的是：

> **“我们已经决定了什么，且不再讨论什么”**

那么分解阶段只解决一个问题：

> **如何在不引入任何新高责任判断的前提下，
把已冻结的设计决策，转化为可以被执行体直接理解和执行的任务描述。**

分解阶段不是设计阶段的延续，
也不是执行阶段的开始。

它是一项**翻译工作**，而不是判断工作。

---

## 一、分解阶段的工程地位

分解阶段的核心工程目标可以被精确定义为：

> **将已冻结的高责任设计结论，
转译为结构化、无歧义、可审计的任务说明书，
并明确哪些判断已经完成，哪些判断被授权给后续执行阶段。**

在这一阶段中：

- **不得**重新讨论设计是否合理
- **不得**补充新的系统级判断
- **不得**通过“顺手决定”引入新的责任来源

分解阶段的失败，往往不是因为执行能力不足，
而是因为**设计判断在这里被悄悄重写**。

---

### 心智模型比喻｜作战决心到作战命令

在军事系统中，
作战决心本身并不能被前线单位直接执行。

它必须被转译为**结构化、可验证的作战命令**：

- 明确任务目标
- 明确行动范围
- 明确禁止事项
- 明确完成条件

如果这一步缺失，
那么所谓的“执行灵活性”，只会演变成越权。

分解阶段，正对应这一角色。

---

## 二、分解阶段的参与角色与责任划分

### 参与角色

- **Vibe Agent**
  分解阶段的主要执行者，负责结构化表达与任务拆解。

- **Actor（人类工程师）**
  分解结果的最终确认者，负责判断分解是否**忠实反映原始决策**。

---

### 责任边界

在分解阶段：

- Vibe Agent **可以决定表达方式**
- Vibe Agent **不能决定设计含义**
- Actor **不再做设计选择**
- Actor **只判断是否发生了语义偏移**

换句话说：

> 分解阶段允许“怎么说”，
> 但不允许“说了什么不一样”。

---

## 三、分解阶段的输入与输出

### 合法输入

分解阶段只接受一种合法输入：

- **已被冻结的设计决策产物**

包括但不限于：

- 设计文档
- 架构说明
- 不变量与约束声明

如果输入本身仍然存在歧义，
那说明问题应当被退回至**决策阶段**，而不是在此阶段补救。

---

### 合法输出

分解阶段的输出是一个或多个**任务说明书**。

每一份任务说明书都必须满足：

- 可被独立理解
- 可被独立执行
- 可被独立审计

它不是提示词，也不是临时指令，
而是一个**正式工程工件**。

---

## 四、任务说明书的工程定义

在 Vibe + Coding 中，任务说明书不是执行指令，也不是实现提示，
而是一种**用于界定执行阶段责任边界的工程工件**。

它的核心作用只有一个：

**在不引入任何新判断的前提下，
一次性明确执行阶段：要达成什么、谁说了算、哪些不能动、允许如何做、何时算完成。**

为了避免任务说明书退化为 checklist 或临时指令，
需要从工程角度明确：
**一份合格的任务说明书，必须同时覆盖以下五个方向的约束。**

这些方向不存在先后顺序，
它们共同构成执行阶段的合法行动空间。

---

### 4.1 目标与意图（本次任务要完成什么）

这一部分用于明确：
**当任务完成时，系统相对于任务开始前应当发生的状态变化。**

它关注的是“完成后的世界长什么样”，
而不是“中间应该怎么做”。

在这一方向中，任务说明书应当明确：

- 本次任务的核心目标
- 本次变更试图解决的具体问题
- 成功完成后应当满足的整体状态

这一部分通常**保留实现自由度**。
只要最终状态满足目标，
执行体可以在不违反其他约束的前提下自行选择实现路径。

**心智模型比喻：**
这相当于作战中的**作战目标**——
例如“坚守阵地”或“夺取高地”，
它定义的是行动的方向，而不是完成的终点。

---

### 4.2 权威与裁决（当出现冲突时，谁说了算）

这一部分用于明确：
**当不同信息来源之间出现不一致时，最终裁决权属于哪里。**

在复杂工程中，
文档、测试、现有实现、历史经验往往并不完全一致。
如果任务说明书未明确裁决来源，
执行阶段就会被迫自行“选择相信谁”，
从而无意中承担设计责任。

在这一方向中，任务说明书应当明确：

- 哪些文档或规范具有最高权威
- 其他材料在本次任务中的地位
- 当冲突发生时应当遵循的裁决顺序

这一部分的目的，是**阻断执行阶段通过选择性解释重新引入设计判断的可能性**。

**心智模型比喻：**
这相当于作战中的**战役目标与指挥权归属**——
一旦确定，前线单位无权自行改变行动方向。

---

### 4.3 边界与冻结（哪些工程事实不得触碰）

这一部分用于明确：
**在本次任务中，哪些工程判断已经完成，不属于执行阶段的裁量范围。**

它关注的不是“系统现在长什么样”，
而是“哪些东西在本次任务中被明确冻结”。

在这一方向中，任务说明书通常会冻结：

- 允许或禁止修改的范围
- 已确定的结构性设计与模块职责
- 不变量、接口语义或其他硬约束
- 明确排除在本次任务之外的内容

如果这一部分缺失，
执行体往往会在“让事情更好实现”的名义下，
对既有决策进行实质性修改。

**心智模型比喻：**
这相当于作战中的**战略边界与禁区**——
前线可以机动，但无权改变战区范围或防线位置。

---

### 4.4 执行约束与工作方式（允许如何工作）

这一部分用于明确：
**执行阶段在工程层面被允许采用的工作方式与作战形式。**

它并不指导具体操作步骤，
而是限制执行阶段的自由度，
以防止引入隐性复杂度或不可审计的差异。

在这一方向中，任务说明书通常会约束：

- 允许或要求使用的工具与运行方式
- 既定的开发方法与工作纪律
- 工程规范、代码质量与组织规则
- 工件（代码、测试、文档）的放置原则

这些约束并不决定“打哪里”，
而是决定“**以什么形式打**”。

**心智模型比喻：**
这相当于作战中的**作战形式选择与战术手段约束**——
明确这场仗是使用装甲推进、空降突袭，还是阵地防御；
但并不决定具体从哪条路线推进、由哪支部队先行。

一旦作战形式被确定，
就不得在执行过程中随意切换。

---

### 4.5 验收与完成语义（什么时候算完成）

这一部分用于回答一个不可回避的问题：
**在工程意义上，如何判断本次任务已经完成。**

如果任务说明书无法明确完成判据，
那么执行阶段无法自主结束工作，
审计阶段也无法判断是否发生越权。

在这一方向中，任务说明书应当明确：

- 必须满足的功能语义与行为约束
- 明确禁止出现的行为
- 成功与失败的可观察表现
- 可被验证的完成条件
- 必要的审计与总结工件

**目标与完成判据是两个不同层级的概念。**

**心智模型比喻：**
作战目标可能是：
“坚守阵地”；

但完成判据必须进一步明确：
“坚守阵地直到晚上 10 点，且防线未被突破”。

前者定义**要做什么**，
后者定义**做到什么程度才算合格、可以结束行动**。

如果没有完成判据，
行动就无法结束，
责任也无法被追溯。

---

### 一个重要提醒

上述五个方向并不是书写顺序，
也不是独立存在的条目。

它们共同定义了：

**执行阶段被授权的行动空间，以及不可逾越的责任边界。**

只要其中任何一个方向缺失，
任务说明书在工程上就是不完整的。

---

### 本节小结

任务说明书的价值，
不在于写得是否详细，
而在于是否一次性解决了执行阶段本不应再思考的问题。

当目标清晰、权威明确、边界冻结、作战形式受控、完成判据可验时，
执行阶段才能被安全地外包，
而不必担心设计在实现过程中被悄然改写。


---

## 五、分解阶段的合格判据

一个分解结果是否合格，可以用一个非常严格的工程标准来判断：

> **如果将任务说明书交给一个完全未参与前序讨论的执行体，
它是否可以在不再询问设计性问题的前提下开始工作？**

允许执行体提出的问题包括：

- 实现细节上的澄清
- 技术层面的选择空间

但**不允许**出现的问题包括：

- “这个模块是不是也应该负责 X？”
- “这个边界是你已经决定好的，还是我可以改？”
- “这个设计是现在确定的，还是实现时再看？”

一旦出现这些问题，
说明分解阶段**未能完成其工程职责**。

用更简单的语言来说就是，如果一个actor作为一个人类工程师拿到这个任务说明书，他是否能够成功在不越界地前提下完成这个任务。

---

## 六、常见错误：在分解阶段重新设计

分解阶段最常见、也最危险的错误，是：

> **以“让任务更好执行”为名，
重新引入设计判断。**

典型表现包括：

- 在任务说明书中补充新的设计假设
- 为了“方便实现”弱化原始约束
- 在未回到决策阶段的情况下修改接口含义

这些行为在形式上看似合理，
但在工程责任上**完全不可接受**。

---

### 心智模型比喻｜前线改写作战命令

前线指挥官可以选择进攻路线，
但无权修改作战目标。

任何以“现场情况更合适”为理由，
对命令本身进行修改的行为，
在军事系统中都被视为严重违纪。

---

## 七、分解与回退：唯一合法的修正方式

如果在分解过程中发现：

- 原始设计存在歧义
- 决策结论不足以支撑任务定义

**唯一合法的处理方式是：**

1. 中止当前分解工作
2. 将问题显式上推
3. 回到决策阶段补充或修正设计
4. 重新冻结后，再次进入分解

不存在在分解阶段“临时修补设计”的合法路径。

---

## 本章小结

分解阶段不是思考阶段，
也不是执行阶段的前奏。

它是：

- 决策与执行之间的**责任隔离层**
- 防止设计被悄然篡改的**结构缓冲区**
- 执行阶段合法性的**唯一来源之一**

当分解阶段被严格执行时：

- 执行阶段可以被安全地完全外包
- 决策阶段的结论不会被实现过程侵蚀
- 审计阶段才能清晰判断是否越权

**这正是分解阶段在 Vibe + Coding 中不可被跳过的工程意义。**
